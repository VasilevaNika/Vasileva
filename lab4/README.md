# Лабораторная работа 4

Синхронизация потоков

## Описание

Проект демонстрирует три классические задачи синхронизации потоков в C#.

## Задачи

### 1. Обедающие философы (Dining Philosophers)

5 философов сидят за круглым столом, у каждого есть вилка слева. Для еды нужны две вилки (левая и правая). Реализованы две версии:
- С deadlock - демонстрирует взаимоблокировку
- Без deadlock - решение через изменение порядка взятия вилок

Используется: `lock`, `SemaphoreSlim`

### 2. Спящий парикмахер (Sleeping Barber)

Парикмахер спит, если нет клиентов. Когда приходит клиент, парикмахер просыпается и работает. Очередь клиентов ограничена.

Используется: `SemaphoreSlim`, `Mutex`, `ConcurrentQueue`, `ManualResetEventSlim`

### 3. Производитель-Потребитель (Producer-Consumer)

Производители создают товары и добавляют их в буфер. Потребители забирают товары из буфера. Буфер ограничен. Реализованы две версии:
- С `BlockingCollection` - готовое решение
- С `SemaphoreSlim` и `lock` - ручная синхронизация

Используется: `BlockingCollection`, `SemaphoreSlim`, `lock`, `Queue`

## Запуск

Через терминал:
```bash
dotnet run
```

Выберите задачу:
- 1 - Обедающие философы
- 2 - Спящий парикмахер
- 3 - Производитель-Потребитель
- 4 - Все задачи

## Тесты

Через терминал:
```bash
dotnet test tests
```


## Структура проекта

```
lab4/
├── Program.cs - главный файл
├── services/
│   ├── DiningPhilosophers.cs - обедающие философы
│   ├── SleepingBarber.cs - спящий парикмахер
│   └── ProducerConsumer.cs - производитель-потребитель
└── tests/ - тесты
```

